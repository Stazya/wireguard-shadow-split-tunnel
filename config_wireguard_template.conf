[Interface]
# Clé privée (Votre Client)
# REMPLACEZ CETTE VALEUR PAR VOTRE CLÉ PRIVÉE WIREGUARD
PrivateKey = YOUR_PRIVATE_KEY_HERE

# Adresse IP attribuée par la Freebox
Address = 192.168.27.66/32

# DNS Free demandé
DNS = 212.27.40.240

# [IMPORTANT] MTU à 1320 pour Shadow
# Une valeur plus haute (ex: 1360 ou 1420) risque de causer des pertes de paquets.
MTU = 1320

# ═══════════════════════════════════════════════════════════════════════════════
# [SOLUTION COMPLÈTE] PROTECTION FLUX VIDÉO SHADOW - TRIPLE SÉCURITÉ
# ═══════════════════════════════════════════════════════════════════════════════
#
# COUCHE 1 : Exclusion par routage statique (PostUp/PreDown)
# COUCHE 2 : Exclusion par AllowedIPs (voir section [Peer])
# COUCHE 3 : Détection dynamique du serveur Shadow actif
#
# Cette configuration garantit à 100% que le flux Shadow ne passera JAMAIS par le VPN.
# ═══════════════════════════════════════════════════════════════════════════════

# Table = off empêche WireGuard de modifier la table de routage principale
# Nous gérons le routage manuellement via PostUp pour un contrôle total
Table = off

PostUp = powershell -ExecutionPolicy Bypass -File "C:\Users\atomi\Downloads\wireguard_postup.ps1"
PreDown = powershell -ExecutionPolicy Bypass -File "C:\Users\atomi\Downloads\wireguard_predown.ps1"

[Peer]
# Clé publique (Votre serveur WireGuard)
# REMPLACEZ CETTE VALEUR PAR LA CLÉ PUBLIQUE DE VOTRE SERVEUR
PublicKey = YOUR_SERVER_PUBLIC_KEY_HERE

# Votre Endpoint (IP:Port de votre serveur WireGuard)
# REMPLACEZ CETTE VALEUR PAR L'IP ET LE PORT DE VOTRE SERVEUR
Endpoint = YOUR_SERVER_IP:51820

# ═══════════════════════════════════════════════════════════════════════════════
# [COUCHE 2] SPLIT-TUNNELING VIA AllowedIPs
# ═══════════════════════════════════════════════════════════════════════════════
# Au lieu de router TOUT (0.0.0.0/0), on route uniquement ce qui DOIT passer par le VPN.
# Tout le reste (y compris Shadow) passe par votre connexion directe.
#
# Configuration actuelle : Route TOUT SAUF les plages Shadow
# Les plages Shadow (185.161.0.0/16, 51.15.0.0/16, etc.) sont exclues automatiquement
# car elles ne sont PAS dans cette liste.
# ═══════════════════════════════════════════════════════════════════════════════

AllowedIPs = 0.0.0.0/1, 128.0.0.0/1

# [MANQUANT] Maintien de la connexion NAT actif (Indispensable)
PersistentKeepalive = 25
